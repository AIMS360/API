AIMS360 Jobs
------------

### Introduction

Any API which deals with huge data and takes time to process the requests will be handled by a Background job. i.e. When such API is called, the request will be placed
in the queue and a job will be created to process the request. The JobID and
status will be returned optionally with a Publishlink as response to the request.

The status of the job needs to be checked in the regular intervals and when the
job status is “Completed” the output will be ready to access.

To check the status of the Job, the below endpoint needs to be called by passing
the respective JobID

`Get /jobsmanagement/odata/v1.0/backgroundjob?\$filter=jobId eq
'jobID'`

Response Properties

| Field Name             	| Field Description                                                                                                                                            	|
|:------------------------	|:--------------------------------------------------------------------------------------------------------------------------------------------------------------	|
| ID                          | `"ID": 52714` <br>Primary Key of the Job                                                                                                         
| jobCategoryID               |  `"jobCategoryID": 1002` <br>The ID of the category to which the job belongs                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| categoryName                | `"categoryName": "Reports"` <br>The name of the category to which the job belongs                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| jobSubCategoryID            | `"jobSubCategoryID": 1003` <br>The ID of the sub-category to which the job belongs                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| subCategoryName             | `"subCategoryName": "Production Forecasting Report"` <br>The name of the sub-category to which the job belongs                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| jobDescription              | `"jobDescription": "Create Production Forecasting Report"` <br>The description of the job                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| clientRequestId             | `"clientRequestId": null` <br>The request ID of the client                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| jobStatus                   |  `"jobStatus": "Completed"` <br>The status of the job. The possible values are Queued, Completed, Failed                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| jobStatusText               |  `"jobStatusText": "Production forecast report completed."` <br>The description about the job status                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| publishLink                 | `"publishLink":"https://api.aims360.rest/reports/v1.0/publishlink/XXXXXXXXXXXXXXXXXXXXXXXX/XXXXXXXXXXXXXXXXXXXXXXXX"` <br>The link to access the output of the job                                                                                                                                                                                                                                                                                                                                                                                       |
| requestURL                  | `"requestURL": "https://api.aims360.rest/documentmanagement/v1.0/aimsdocument/1b59c33b-589b-4356-b829-908614848403-20190607060901986"`   <br>                                                                                                                                                                                                                                                                                                                                                                                                          |
| publishLinkAccessScope      | `"publishLinkAccessScope": "Private"` <br>The scope to access the publishlink. Valid scopes are Public, Private and PeopleInOrganization                                                                                                                                                                                                                                                                                                                                                                                                                 |
| percentCompleted            | `"percentCompleted": 100` <br>The percentage of job completion                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| jobID                       |  `"jobID": "d29fac30-650a-4ff2-b2b1-acab3c7472ea-20190607060819639"` <br>The unique ID of the job                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| responseType                |  `"responseType": "File Attachment"` <br>The type of job response                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| response                    | `"response": "[{\\"documentName\\":\\"Forecasting_20190607060922.xlsx\\",\\"DownloadLink\\":\\"https://api.aims360.rest/documentmanagement/v1.0/aimsdocument/d29fac30-650a-4ff2-b2b1-acab3c7472ea-20190607060819639/4wwrcVf6HjwefEBkCuKvCfsAZBMKALdKUDrT1a1ou7pT4sn84NONPQPx9StenougircnaZN5sxB7c0JMNRLqe67QhpWVLkUJQY3d20190607060857054\\",\\"SizeInMB\\":0.0,\\"Type\\":\\".xlsx\\",\\"DocumentID\\":\\"d29fac30-650a-4ff2-b2b1-acab3c7472ea-20190607060819639\\",\\"ExpiryDate\\":\\"2019-07-07T06:09:22.6593866Z\\",\\"Version\\":\\"1.0\\"}]"` |
| startDate                   |  `"startDate": "2019-06-07T06:08:19.64Z"` <br>The date when the job started                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| completedDate               | `"completedDate": "2019-06-07T06:09:22.737Z"` <br>The date when the job is completed                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| purgeDateTime               |   `"purgeDateTime": "2019-07-07T06:08:19.64Z"` <br>The date and time when to purge the job and associated request and response                                                                                                                                                                                                                                                                                                                                                                                                                           |
| clientID                    | `"clientID": "44FDE9CF-230A-4516-A128-AE464776F1C5"` <br>The unique ID of the Client                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| DatabaseName                |   `"DatabaseName": "AZ0XXData1"` <br>The name of the client's database                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| accountCode                 | `"accountCode": "AZ022"` <br>The account code of the client                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| purgeDays                   | `"purgeDays": 30` <br>The number of purge days                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| canReRun                    |  `"canReRun": "Yes"` <br>Determines whether the job can be run again or not                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| maximumDateTimeToExecuteJob |   `"maximumDateTimeToExecuteJob": null` <br>If the job can be run again, the maximum date and time with in which the job can be rerun                                                                                                                                                                                                                                                                                                                                                                                                                    |
| numberOfAttempts            |  `"numberOfAttempts": 0` <br>The number of attempts taken to run the job                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| CanPublish                  | `"CanPublish": "Yes"` <br>Determines whether the job publishes any results or not                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| createdBy                   |   `"createdBy": "support\@aims360.com"` <br>The email address of the operator who created the job                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| createdDate                 |  "createdDate": "2019-06-07T06:08:19.64Z" The date and time when the job is created                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| modifiedBy                  | `"modifiedBy": "support\@aims360.com"` <br>The email address of the operator who modified most recently                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| modifiedDate                | `"modifiedDate": "2019-06-07T06:09:22.737Z"` <br>The date and time when the job is modified                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| rowversion                  | `"rowversion": "AAAAAAAIJCU="` <br>The version number of the row                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |

  
 ### Rerun

The job can be run again if the “canReRun” property of the job is Yes. To rerun
the job, the below API needs to be called by passing the respective JobID

`POST
jobsmanagement/v1.0/backgroundjob/?\$filter=jobId eq
'jobID'/rerun`

Response properties

| Field Name             | Field Description                                                               |
|:------------------------|:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| jobId                  | `"jobId": "XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX"` <br>The ID of the job created to serve the request   |                                              
| jobStatus              | `"jobStatus": "Queued"` <br>The status of the job                                                                                                                  |
| publishLink            | `"publishLink":"https://api.aims360.rest/reports/v1.0/publishlink/XXXXXXXXXXXXXXXXXXXXXXXX/XXXXXXXXXXXXXXXXXXXXXXXX"` <br>The link to access the output of the job |
| publishLinkAccessScope | `"publishLinkAccessScope": "Private"` <br>The scope to access the publishlink. Valid scopes are Public, Private and PeopleInOrganization                           |


<br>
